<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jugamos al Deci 7</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
        crossorigin="anonymous"></script>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</head>

<body>
    <div class="container text-center">
        <div class="row align-items-start">
            <div class="col">
                <h1>Juguemos al deci 7</h1>
                <button type="button" class="btn btn-danger" id="reinciar">Reiniciar juego</button>

                <br>
                <br>
                <input type="text" class="form-control" name="aniadir" placeholder="Escribe una categoria nueva" id="categoriaPersonalizada">
                <button type="button" class="btn btn-primary" id="agregarCategoria">Agregar categoría</button>

            </div>
            <div class="col">
                <h1>Próxima categoría:</h1><br>
                <h2 id="categoriaAJugar">Click en el boton verde para empezar</h2>
                <h3 id="timer">Timer: 60 segundos</h3>
                <button type="button" class="btn btn-success" id="rollear">Siguiente categoría</button>

            </div>
        </div>
    </div>

</body>
<script>
    let CATEGORIAS = ["Nombres de hombre",
        "Nombres de mujer",
        "Ciudades de Europa",
        "Ciudades de América",
        "Animales",
        "Frutas y verduras",
        "Países del mundo",
        "Marcas de coches",
        "Instrumentos musicales",
        "Deportes",
        "Cantantes famosos",
        "Películas",
        "Libros",
        "Personajes de ficción",
        "Juegos de mesa",
        "Elementos químicos",
        "Herramientas",
        "Idiomas",
        "Canciones",
        "Platos típicos",
        "Profesiones",
        "Deportistas famosos",
        "Ríos importantes",
        "Montañas del mundo",
        "Capitales de país",
        "Videojuegos",
        "Juguetes",
        "Marcas de moda",
        "Instrumentos de laboratorio",
        "Plantas"];
    const USADAS = []

    let rollear = document.getElementById("rollear");
    let categoriaNueva = document.getElementById("categoriaPersonalizada");
    let agregarCategoria = document.getElementById("agregarCategoria");
    let categoriaAJugar = document.getElementById("categoriaAJugar");
    let reiniciar = document.getElementById("reinciar");
    let segundos = 60
    let timer = document.getElementById("timer")
    function agregarCategoriaAArray(elemento, array) {
        if(categoriaNueva.value==""){
            Swal.fire({
                icon: "error",
                title: "Categoría no valida",
                text: "El campo no puede estar vacío",
            })

        }else{
            array.push(elemento);
            console.log(array)
            return array;
            
            
          
        }     
       

    }

    // Envuelve la llamada a agregarCategoriaAArray en una función anónima
    agregarCategoria.addEventListener('click', function () {
        agregarCategoriaAArray(categoriaNueva.value, CATEGORIAS);
        categoriaNueva.value = "";
    });

    function getRandomInt(max) {
        return Math.floor(Math.random() * max);
    }
    function rollearCategoria() {
        if (CATEGORIAS.length == 0) {
            categoriaAJugar.innerText = "No quedan categorías para jugar"
        } else {

            let posicion = getRandomInt(CATEGORIAS.length)
            console.log(posicion)
            let proximo = CATEGORIAS.splice(posicion, 1)
            console.log(proximo)
            categoriaAJugar.innerText = proximo
            return proximo
        }

    }
    rollear.addEventListener("click", function () {
        categoriaAJugar.value = rollearCategoria()
        mostrarTiempoTranscurrido()
        end = Date.now() + 60 * 1000
    })


    reiniciar.addEventListener("click", function () {
        console.log("HOLA")
        let CATEGORIAS = ["Nombres de hombre",
        "Nombres de mujer",
        "Ciudades de Europa",
        "Ciudades de América",
        "Animales",
        "Frutas y verduras",
        "Países del mundo",
        "Marcas de coches",
        "Instrumentos musicales",
        "Deportes",
        "Cantantes famosos",
        "Películas",
        "Libros",
        "Personajes de ficción",
        "Juegos de mesa",
        "Elementos químicos",
        "Herramientas",
        "Idiomas",
        "Canciones",
        "Platos típicos",
        "Profesiones",
        "Deportistas famosos",
        "Ríos importantes",
        "Montañas del mundo",
        "Capitales de país",
        "Videojuegos",
        "Juguetes",
        "Marcas de moda",
        "Instrumentos de laboratorio",
        "Plantas"];
        console.log(CATEGORIAS)
        categoriaAJugar.innerText = "Click en el boton verde para empezar"
    })

    let end = Date.now() + 60 * 1000; //Aqui tomamos el tiempo de cuando queremos que el contador termine (En 60 segundos a partir de ahora)

    function mostrarTiempoTranscurrido() {
        const tiempoTranscurrido = Math.floor((end - Date.now()) / 1000);
        if (tiempoTranscurrido > 0) {
            timer.innerText = `Timer: ${tiempoTranscurrido} segundos`
            //Programamos para que se revise de nuevo el tiempo transcurrido en 500ms
            setTimeout(mostrarTiempoTranscurrido, 500);
        } else if (tiempoTranscurrido <= 0) {
            Swal.fire({
                icon: "error",
                title: "Sin tiempo",
                text: "Se termino el tiempo",
            })
            end = Date.now() + 60 * 1000
        }
    }
    setTimeout(mostrarTiempoTranscurrido, 500); //Mostramos el tiempo transcurrido (en este caso por consola, pero podría ser en cualquier lado)





</script>

</html>